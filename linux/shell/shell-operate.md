# 操作符
原生shell不支持简单的数学运算，需要借助awk和expr实现。
例如
```bash
val=`expr 2 + 2`
```
> 表达式和运算符之间要有空格

## 赋值
### 变量赋值
`=`通用赋值操作符，用于算数和字符串赋值。
```bash
# = 在这里是测试操作符
if [ "$string1" = "$string2" ]
# 这种写法更加安全，可以防止两个变量中的一个为空所产生的错误
if [ "X$string1" = "X$string2" ]
```

## 算数操作符
操作符 | 说明 | 示例
---- | ---- | ----
+ | 加法 | `expr 4 + 5 ` ==> 20
- | 减法
* | 乘法  | `expr $a \* $b` ==> 200
/ |除法
**|幂运算
% |模运算，求余运算
+= | 加-等于
-= | 减-等于
*= | 乘-等于
/= | 除-等于
%= | 取模-等于

> 在 MAC 中 shell 的 expr 语法是：$((表达式))，此处表达式中的 "*" 不需要转义符号 "\" 。

## 关系运算符(整数比较)
比较符号 | 说明
----| ----
-eq | =
-ne | !=
-gt | >
-ge | >=
-lt | <
-le | <=
<   | 小于，双括号中使用
>   | 大于，双括号中使用
<=  | 小于等于，双括号中使用
>=  | 大于等于，双括号中使用

## 布尔运算符
运算符 | 说明 | 示例
----- | ----- | ----
!  | 非运算，表达式为 true 则返回 false，否则返回 true。  |  [ ! false ] 返回 true。
-o   | 或运算，有一个表达式为 true 则返回 true。  |  [ $a -lt 20 -o $b -gt 100 ] 返回 true。
-a   | 与运算，两个表达式都为 true 才返回 true。  |  [ $a -lt 20 -a $b -gt 100 ] 返回 false。


## 字符串比较
比较符号 | 说明 | 示例
----| ---- | ---
=   | 等于
== | 等于，与=等价
!= | 不等号
< | 按ASCII字符排序
> | 按ASCII字符排序
-z   | 检测字符串长度是否为0，为0返回 true。   | [ -z $a ] 返回 false。
-n   | 检测字符串长度是否为0，不为0返回 true。  | [ -n $a ] 返回 true。
str  | 检测字符串是否为空，不为空返回 true。  |   [ $a ] 返回 true。


## 位操作符
操作符 | 说明
----- | ----
<< | 左移一位（每次左移都相当于乘以2）
<<= | “左移-赋值”
\>> | 右移一位（每次右移都将除以2）
\>>= | “右移-赋值”（与<<=正好相反）
& | 按位与
&= | “按位与-赋值”
\| | 按位或
\|= | “按位或-赋值”
～ | 按位反
! | 按位非
^ | 按位异或XOR
^= | “按位异或-赋值”

## 逻辑操作符
- &&：逻辑与
- ||：逻辑或

## 混杂的操作符
`,`都好操作符：逗号操作符可以连接两个或多个算术运算。所有的操作都会被运行（可能会有负作用），但是只会返回最后操作的结果。
```bash
$ let "t1 = ((5 + 3, 7 - 1, 15 - 4))" 
$ echo "t1 = $t1" # t1 = 11
```